<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/png" sizes="16x16" href="public/assets/img/logo.jpg">

    <title>Afri Gebeta</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="public/vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="public/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="public/vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="public/vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="public/vendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="public/css/util.css">
    <link rel="stylesheet" type="text/css" href="public/css/main.css">
    <!--===============================================================================================-->
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="public/vendor/jquery/jquery-3.2.1.min.js"></script>
    <script>
        function removefromfirst(string) {
            for (let i = 0; i < string.length; i++) {
                if (string[i] != ' ') {
                    return string;
                } else {
                    string = string.substring(1);
                }
            }
        }


        function removewhite(string) {
            let t = ''
            for (let i = 0; i < string.length; i++) {
                if (string[i] != ' ') t = t + string[i]
            }
            return t
        }

        function change_placeholder_color(target_class, color_choice) {
            $("body").append("<style>" + target_class + "::placeholder{color:" + color_choice + "}</style>")
        }


        $(document).ready(function() {

            //userregister
            document.addEventListener('click', function(e) {
                e.preventDefault()





                if (e.target && e.target.id == 'registerButton') {

                    let fName = "";
                    let lName = "";
                    let age = "";
                    let city = "";
                    let phone = "";
                    let email = "";
                    let password = "";
                    let username = "";
                    let returnNow = false;
                    if (removefromfirst($('#fName').val()) == undefined || removefromfirst($('#fName').val()).length == 0) {
                        $('#fName').attr('placeholder', 'Please Enter Your First Name');
                        change_placeholder_color('#fName', 'red')
                        returnNow = true;
                    } else {
                        fName = removefromfirst($('#fName').val());

                    }



                    if (removefromfirst($('#lName').val()) == undefined || removefromfirst($('#lName').val()).length == 0) {
                        $('#lName').attr('placeholder', 'Please Enter Your Last Name');
                        change_placeholder_color('#lName', 'red')
                        returnNow = true;
                    } else {
                        lName = removefromfirst($('#lName').val());

                    }


                    if (removefromfirst($('#age').val()) == undefined || removefromfirst($('#age').val()).length == 0) {
                        $('#age').attr('placeholder', 'Please Enter Your age');
                        change_placeholder_color('#age', 'red')
                        returnNow = true;
                    } else {
                        age = removefromfirst($('#age').val());

                    }


                    if (removefromfirst($('#city').val()) == undefined || removefromfirst($('#city').val()).length == 0) {
                        $('#city').attr('placeholder', 'Please Enter Your city');
                        change_placeholder_color('#city', 'red')
                        returnNow = true;
                    } else {
                        city = removefromfirst($('#city').val());

                    }


                    if (removewhite($('#phone').val()) == undefined || removewhite($('#phone').val()).length == 0) {
                        $('#phone').attr('placeholder', 'Please Enter Your Phone');
                        change_placeholder_color('#phone', 'red')
                        returnNow = true;
                    } else {

                        phone = removefromfirst($('#phone').val());

                    }


                    if (removewhite($('#email').val()) == undefined || removewhite($('#email').val()).length == 0) {
                        $('#email').attr('placeholder', 'Please Enter Your email');
                        change_placeholder_color('#email', 'red')
                        returnNow = true;
                    } else {
                        email = removefromfirst($('#email').val());

                    }


                    if (removewhite($('#password').val()) == undefined || removewhite($('#password').val()).length == 0) {
                        $('#password').attr('placeholder', 'Please Enter password');
                        change_placeholder_color('#password', 'red')
                        returnNow = true;
                    } else {
                        password = removefromfirst($('#password').val());

                    }

                    if (removefromfirst($('#username').val()) == undefined || removefromfirst($('#username').val()).length == 0) {
                        $('#username').attr('placeholder', 'Please Enter username');
                        change_placeholder_color('#username', 'red')
                        returnNow = true;
                    } else {
                        username = removefromfirst($('#username').val());

                    }

                    if (returnNow) return;

                    let url = 'https://afrigebeta.herokuapp.com/api/user/register'
                    alert("sending")
                    $.post(url, {
                        username: username,
                        phone: phone,
                        city: city,
                        email: email,
                        firstName: fName,
                        lastName: lName,
                        age: age,
                        password: password

                    }, function(data, status) {
                        console.log(status)
                        if (status === 'success') {

                            window.location.href = "markets.html";
                        }
                    }).fail(function(jqXHR, textStatus, errorThrown) {


                        console.log(jqXHR)


                    });

                }

            })

        })

        function url_redirect(options) {
            var $form = $("<form />");

            $form.attr("action", options.url);
            $form.attr("method", options.method);

            for (var data in options.data)
                $form.append('<input type="hidden" name="' + data + '" value="' + options.data[data] + '" />');

            $("body").append($form);
            $form.submit();
        };


        function callLogin() {
            window.location.href = "login.html";
        }
    </script>
</head>

<body>

    <div class="limiter">
        <div class="container-login100">
            <div class="wrap-login100">
                <div class="login100-pic js-tilt" data-tilt>
                    <img src="public/images/afrigebeta.jpg" alt="IMG">
                    <div style="align-self: center; align-content: center;">
                        <h2 style="font-family: cursive;text-align: center;">Benefits of becoming a member </h2>
                        <ul style="text-align: center;margin: 2px; padding: 5px;">
                            <li>~~ A free pass to ordering your grocieries online</li>
                            <li>~~ Customized user experience based on your activities</li>
                            <li>~~ Notifications on upcoming discounts and more </li>

                        </ul>
                    </div>
                </div>

                <form class="login100-form validate-form">
                    <span class="login100-form-title">
						Member Sign Up
					</span>
                    <div class="wrap-input100 validate-input" data-validate="First name is required">
                        <input class="input100" id="fName" type="text" name="fullname" placeholder="First Name">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i class="fa fa-user" aria-hidden="true"></i>
						</span>
                    </div>


                    <div class="wrap-input100 validate-input" data-validate="Last name is required">
                        <input class="input100" id="lName" type="text" name="fullname" placeholder="Last name">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i class="fa fa-user" aria-hidden="true"></i>
						</span>
                    </div>

                    <div class="wrap-input100 validate-input" data-validate="Age is required">
                        <input class="input100" id="age" type="number" name="age" placeholder="Age">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i class="fa fa-age" aria-hidden="true"></i>
						</span>
                    </div>

                    <div class="wrap-input100 validate-input" data-validate="City is required">
                        <input class="input100" id="city" type="text" name="city" placeholder="City">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i class="fa fa-city" aria-hidden="true"></i>
						</span>
                    </div>





                    <div class="wrap-input100 validate-input" data-validate="Phone number is required">
                        <input class="input100" id="phone" type="tel" name="pno" placeholder="Phone Number">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i class="fa fa-city" aria-hidden="true"></i>
						</span>
                    </div>



                    <div class="wrap-input100 validate-input" data-validate="Valid email is required: ex@abc.xyz">
                        <input class="input100" id="email" type="text" name="email" placeholder="Email">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i 
							class="fa fa-envelope" aria-hidden="true"></i>
						</span>
                    </div>


                    <div class="wrap-input100 validate-input" data-validate="Username is required">
                        <input class="input100" id="username" type="text" name="Username" placeholder="Username">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i class="fa fa-user" aria-hidden="true"></i>
						</span>
                    </div>

                    <div class="wrap-input100 validate-input" data-validate="Password is required">
                        <input class="input100" id="password" type="password" name="pass" placeholder="Password">
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
							<i class="fa fa-lock" aria-hidden="true"></i>
						</span>
                    </div>

                    <div class="container-login100-form-btn">
                        <button class="login100-form-btn" id="registerButton">
							Sign up
						</button>
                    </div>

                    <div class="text-center p-t-12">
                        <span class="txt1">
							Already have an account?
						</span>
                        <a class="txt2" href="#" onclick="callLogin()">
							Login
						</a>
                    </div>

                    <!-- <div class="text-center p-t-136">
						<a class="txt2" href="#">
							Log in
							<i class="fa fa-long-arrow-right m-l-5" aria-hidden="true"></i>
						</a>
					</div> -->
                </form>
            </div>
        </div>
    </div>




    <!--===============================================================================================-->


    <!--===============================================================================================-->
    <script src="public/vendor/bootstrap/js/popper.js"></script>
    <script src="public/vendor/bootstrap/js/bootstrap.min.js"></script>
    <!--===============================================================================================-->
    <script src="public/vendor/select2/select2.min.js"></script>
    <!--===============================================================================================-->
    <script src="public/vendor/tilt/tilt.jquery.min.js"></script>
    <script>
        $('.js-tilt').tilt({
            scale: 1.1
        })
    </script>
    <!--===============================================================================================-->
    <script src="public/js/main.js"></script>

</body>

</html>